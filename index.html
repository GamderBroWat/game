<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Mobile Video Editor</title>
<script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.6/dist/ffmpeg.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}
body{background:#0f0f0f;color:#fff;height:100vh;overflow:hidden}
.app{height:100vh;display:flex;flex-direction:column}
header{height:56px;background:#181818;display:flex;align-items:center;justify-content:center;font-weight:600;border-bottom:1px solid #222}
main{flex:1;padding:12px;display:flex;flex-direction:column;gap:12px}
video{width:100%;border-radius:12px;background:#000}
.controls{display:flex;gap:8px}
.controls button{flex:1;background:#2563eb;border:none;border-radius:12px;color:#fff;padding:12px;font-size:14px}
.timeline{display:flex;gap:8px}
.timeline input{flex:1}
footer{height:64px;background:#181818;display:flex;justify-content:space-around;align-items:center;border-top:1px solid #222;font-size:12px;color:#aaa}
</style>
</head>
<body>
<div class="app">
<header>Онлайн видеоредактор</header>
<main>
<input type="file" id="upload" accept="video/*" />
<video id="video" controls></video>
<div class="timeline">
<input type="number" id="start" placeholder="start (sec)" />
<input type="number" id="end" placeholder="end (sec)" />
</div>
<div class="controls">
<button id="cut">✂️ Обрезать</button>
<button id="speed">⚡ x2</button>
</div>
<a id="download" style="display:none;color:#4ade80">Скачать видео</a>
</main>
<footer>
<div>Проекты</div><div>Инструменты</div><div>Профиль</div>
</footer>
</div>
<script>
const { FFmpeg } = FFmpegWASM;
const ffmpeg = new FFmpeg();
const upload=document.getElementById('upload');
const video=document.getElementById('video');
const download=document.getElementById('download');
let file;
upload.onchange=e=>{
 file=e.target.files[0];
 video.src=URL.createObjectURL(file);
};
async function loadFF(){if(!ffmpeg.loaded) await ffmpeg.load({coreURL:"https://unpkg.com/@ffmpeg/core@0.12.6/dist/ffmpeg-core.js"});}
document.getElementById('cut').onclick=async()=>{
 await loadFF();
 const start=document.getElementById('start').value||0;
 const end=document.getElementById('end').value||5;
 ffmpeg.FS('writeFile','in.mp4',await fetchFile(file));
 await ffmpeg.exec(['-i','in.mp4','-ss',start,'-to',end,'-c','copy','out.mp4']);
 const data=ffmpeg.FS('readFile','out.mp4');
 const url=URL.createObjectURL(new Blob([data.buffer],{type:'video/mp4'}));
 download.href=url;download.download='edited.mp4';download.style.display='block';
 video.src=url;
};
document.getElementById('speed').onclick=async()=>{
 await loadFF();
 ffmpeg.FS('writeFile','in.mp4',await fetchFile(file));
 await ffmpeg.exec(['-i','in.mp4','-filter:v','setpts=0.5*PTS','out.mp4']);
 const data=ffmpeg.FS('readFile','out.mp4');
 const url=URL.createObjectURL(new Blob([data.buffer],{type:'video/mp4'}));
 video.src=url;download.href=url;download.download='speed.mp4';download.style.display='block';
};
async function fetchFile(file){return new Uint8Array(await file.arrayBuffer());}
</script>
</body>
</html>