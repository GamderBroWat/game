<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Advanced Mobile Video Editor</title>
<style>
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}
body{margin:0;background:#0e0e0e;color:#fff}
header{padding:12px;text-align:center;font-weight:600}
video,canvas{width:100%;max-height:55vh;background:#000}
.controls{padding:10px;display:flex;flex-direction:column;gap:10px}
.row{display:flex;gap:6px}
button{flex:1;padding:10px;border:none;border-radius:10px;background:#1f6fff;color:#fff;font-weight:600}
button.alt{background:#333}
label{font-size:12px;opacity:.7}
input[type=range]{width:100%}
.timeline{height:60px;background:#1a1a1a;border-radius:10px;display:flex;align-items:center;padding:5px;font-size:12px;overflow-x:auto}
.clip{min-width:80px;height:40px;background:#2f2f2f;border-radius:6px;margin-right:6px;display:flex;align-items:center;justify-content:center}
</style>
</head>
<body>
<header>ğŸ“± Advanced Video Editor</header>
<input type="file" accept="video/*" id="upload" style="padding:10px" />
<video id="video" playsinline></video>
<canvas id="canvas" hidden></canvas>
<div class="controls">
<label>â± ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ ĞºĞ°Ğ´Ñ€Ğ° (scrub)</label>
<input type="range" id="scrubber" min="0" max="100" value="0" />
<div class="timeline" id="timeline"><div class="clip">Clip 1</div></div>
<div class="row">
<button onclick="playPause()">â–¶ / â¸</button>
<button class="alt" onclick="splitClip()">âœ‚ Split</button>
<button class="alt" onclick="trimClip()">â± Trim</button>
</div>
<label>Speed</label>
<input type="range" min="0.25" max="2" step="0.25" value="1" id="speed" />
<label>Brightness</label>
<input type="range" min="0" max="200" value="100" id="brightness" />
<label>Contrast</label>
<input type="range" min="0" max="200" value="100" id="contrast" />
<label>Saturation</label>
<input type="range" min="0" max="200" value="100" id="saturation" />
<div class="row">
<button onclick="addText()">ğŸ“ Text</button>
<button class="alt" onclick="addSticker()">ğŸ˜€ Sticker</button>
<button class="alt" onclick="addMusic()">ğŸµ Music</button>
</div>
<div class="row">
<button onclick="exportVideo()">âº Export</button>
</div>
</div>
<script>
const video=document.getElementById('video');
const scrubber=document.getElementById('scrubber');
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
let textOverlay='';
let recorder,chunks=[];
upload.onchange=e=>{const f=e.target.files[0];video.src=URL.createObjectURL(f);video.onloadedmetadata=()=>{canvas.width=video.videoWidth;canvas.height=video.videoHeight;scrubber.max=Math.floor(video.duration*1000);draw();}}
function playPause(){video.paused?video.play():video.pause()}
function splitClip(){alert('Split: MVP stub')}
function trimClip(){alert('Trim: MVP stub')}
function addSticker(){alert('Sticker system: MVP stub')}
function addMusic(){alert('Music upload: MVP stub')}
function addText(){const t=prompt('Text');if(t)textOverlay=t}
function draw(){ctx.filter=`brightness(${brightness.value}%) contrast(${contrast.value}%) saturate(${saturation.value}%)`;if(!video.paused&&!video.ended){ctx.drawImage(video,0,0,canvas.width,canvas.height);if(textOverlay){ctx.fillStyle='white';ctx.font='48px sans-serif';ctx.fillText(textOverlay,40,80)}}requestAnimationFrame(draw)}
speed.oninput=()=>video.playbackRate=speed.value;

scrubber.oninput=()=>{
  video.pause();
  video.currentTime=scrubber.value/1000;
  drawFrame();
};

function drawFrame(){
  ctx.filter=`brightness(${brightness.value}%) contrast(${contrast.value}%) saturate(${saturation.value}%)`;
  ctx.drawImage(video,0,0,canvas.width,canvas.height);
  if(textOverlay){ctx.fillStyle='white';ctx.font='48px sans-serif';ctx.fillText(textOverlay,40,80)}
}
function exportVideo(){const stream=canvas.captureStream();recorder=new MediaRecorder(stream,{mimeType:'video/webm'});recorder.ondataavailable=e=>chunks.push(e.data);recorder.onstop=()=>{const blob=new Blob(chunks,{type:'video/webm'});const a=document.createElement('a');a.href=URL.createObjectURL(blob);a.download='video.webm';a.click();chunks=[]};recorder.start();video.play();video.onended=()=>recorder.stop()}
</script>
</body>
</html>